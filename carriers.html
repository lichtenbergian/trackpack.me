<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supported Carriers - TrackPack.me</title>
  <meta name="description" content="Complete list of 3000+ carriers supported by TrackPack.me for all your parcel tracking needs.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
  <style>
    /* Stili coerenti con il tema principale */
    :root {
      --deep-space: #0a0a14;
      --stellar-purple: #6c43f5;
      --nebula-purple: #8a6cff;
      --cosmic-gray: #1a1a2e;
      --starlight: #e0e0ff;
      --galaxy-edge: #0f0f1f;
      
      /* Theme tokens */
      --bg: #f6f3eb;
      --fg: #111111;
      --muted: #444444;
      --card: #ffffff;
      --border: rgba(108, 67, 245, 0.25);
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    /* Dark theme */
    :root[data-theme="dark"] {
      --bg: var(--deep-space);
      --fg: var(--starlight);
      --muted: #a0a0c0;
      --card: rgba(26, 26, 46, 0.6);
      --border: rgba(138, 108, 255, 0.25);
      --card-shadow: 0 10px 26px rgba(0, 0, 0, 0.18);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--bg);
      color: var(--fg);
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    header {
      background: var(--card);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .header-container {
      width: 92%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--fg);
    }

    .logo-icon {
      font-size: 1.5rem;
      color: var(--nebula-purple);
    }

    .logo-text {
      font-size: 1.4rem;
      font-weight: 800;
      letter-spacing: -0.2px;
      background: linear-gradient(90deg, var(--stellar-purple), var(--nebula-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--fg);
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    /* Main content */
    main {
      flex: 1;
      width: 100%;
      padding: 2rem 0;
    }

    .page-container {
      width: 92%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2rem;
      box-shadow: var(--card-shadow);
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 1.5rem;
      background: linear-gradient(90deg, var(--stellar-purple), var(--nebula-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .search-container {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 14px 16px 14px 45px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--fg);
      font-size: 1rem;
      transition: border-color 0.2s ease;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--nebula-purple);
      box-shadow: 0 0 0 3px rgba(138, 108, 255, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
    }

    .carriers-table-container {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .carriers-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }

    .carriers-table th {
      background: rgba(138, 108, 255, 0.1);
      padding: 1rem;
      text-align: left;
      font-weight: 600;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      user-select: none;
    }

    .carriers-table th:hover {
      background: rgba(138, 108, 255, 0.15);
    }

    .carriers-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
    }

    .carriers-table tr:last-child td {
      border-bottom: none;
    }

    .carriers-table tr:hover {
      background: rgba(138, 108, 255, 0.05);
    }

    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 2rem;
      gap: 0.5rem;
    }

    .pagination button {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--fg);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .pagination button:hover:not(:disabled) {
      border-color: var(--nebula-purple);
      background: rgba(138, 108, 255, 0.1);
    }

    .pagination button.active {
      background: var(--nebula-purple);
      color: white;
      border-color: var(--nebula-purple);
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .table-info {
      margin-top: 1rem;
      text-align: center;
      color: var(--muted);
    }

    .loading-indicator {
      text-align: center;
      padding: 2rem;
      color: var(--muted);
    }

    .loading-indicator i {
      margin-right: 0.5rem;
    }

    /* Bottom navigation */
    .bottom-nav {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin: 2rem 0 1rem;
      flex-wrap: wrap;
    }

    .bottom-nav a {
      color: var(--muted);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    .bottom-nav a:hover {
      color: var(--nebula-purple);
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 1.5rem;
      color: var(--muted);
      font-size: .9rem;
      border-top: 1px solid var(--border);
      background: var(--card);
      margin-top: auto;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .card {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .carriers-table th,
      .carriers-table td {
        padding: 0.75rem;
      }
    }

    @media (max-width: 480px) {
      .card {
        padding: 1.2rem;
      }
      
      h1 {
        font-size: 1.6rem;
      }
      
      .carriers-table th,
      .carriers-table td {
        padding: 0.5rem;
        font-size: 0.9rem;
      }
      
      .pagination {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <a href="/" class="logo">
        <i class="fas fa-box-open logo-icon"></i>
        <div class="logo-text">TrackPack.me</div>
      </a>
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <span id="theme-icon" class="theme-icon">ðŸŒ™</span>
      </button>
    </div>
  </header>

  <main>
    <div class="page-container">
      <div class="card">
        <h1>Supported Carriers</h1>
        <p>TrackPack.me supports over 3000 carriers worldwide. Use the search below to find a specific carrier.</p>
        
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" id="search-input" placeholder="Search carriers...">
        </div>
        
        <div class="carriers-table-container">
          <table class="carriers-table" id="carriers-table">
            <thead>
              <tr>
                <th data-sort="key">Key <i class="fas fa-sort"></i></th>
                <th data-sort="name_en">Name (EN) <i class="fas fa-sort"></i></th>
                <th data-sort="name_cn">Name (CN) <i class="fas fa-sort"></i></th>
                <th data-sort="name_hk">Name (HK) <i class="fas fa-sort"></i></th>
                <th data-sort="url">Website <i class="fas fa-sort"></i></th>
              </tr>
            </thead>
            <tbody id="carriers-table-body">
              <tr>
                <td colspan="5" class="loading-indicator">
                  <i class="fas fa-spinner fa-spin"></i> Loading carriers data...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="table-info" id="table-info">
          Loading carriers...
        </div>
        
        <div class="pagination" id="pagination">
          <button id="prev-page" disabled>Previous</button>
          <span id="page-numbers"></span>
          <button id="next-page" disabled>Next</button>
        </div>
      </div>
    </div>

    <div class="bottom-nav">
      <a href="/">Home</a>
      <a href="/blog/">Blog & Guides</a>
      <a href="/privacy-policy.html">Privacy Policy</a>
    </div>
  </main>

  <footer>
    <div>
      <a href="/privacy-policy.html">Privacy Policy</a> | 
      <a href="/cookie-policy.html">Cookie Policy</a>
    </div>
    <div>Â© 2025 TrackPack.me. All rights reserved.</div>
  </footer>

  <script>
    // Theme toggle functionality
    (function () {
      const root = document.documentElement;
      const saved = localStorage.getItem('theme');
      if (!saved) {
        root.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      } else if (saved) {
        root.setAttribute('data-theme', saved);
      }
      
      const icon = document.getElementById('theme-icon');
      
      function updateIcon() {
        const theme = root.getAttribute('data-theme') || 'light';
        icon.textContent = theme === 'light' ? 'ðŸŒ™' : 'â˜€ï¸';
        icon.setAttribute('aria-label', theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode');
      }
      
      updateIcon();
      
      document.getElementById('theme-toggle').addEventListener('click', () => {
        const current = root.getAttribute('data-theme');
        const next = current === 'light' ? 'dark' : 'light';
        
        root.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
        updateIcon();
      });
    })();

    // Carriers table functionality
    document.addEventListener('DOMContentLoaded', function() {
      const tableBody = document.getElementById('carriers-table-body');
      const searchInput = document.getElementById('search-input');
      const tableInfo = document.getElementById('table-info');
      const prevButton = document.getElementById('prev-page');
      const nextButton = document.getElementById('next-page');
      const pageNumbers = document.getElementById('page-numbers');
      const tableHeaders = document.querySelectorAll('th[data-sort]');
      
      let carriersData = [];
      let filteredData = [];
      let currentPage = 1;
      const itemsPerPage = 20;
      let sortColumn = 'name_en';
      let sortDirection = 'asc';
      
      // Load CSV data from /data/carriers.csv
      async function loadCarriersData() {
        try {
          const response = await fetch('/data/carriers.csv');
          
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          
          const csvText = await response.text();
          
          // Parse CSV with the new format: "key","name_en","name_cn","name_hk","url"
          const lines = csvText.split('\n');
          
          carriersData = [];
          for (let i = 1; i < lines.length; i++) {
            if (lines[i].trim() === '') continue;
            
            // Parse CSV line with quoted fields
            const regex = /"([^"]+)"/g;
            let matches = [];
            let match;
            
            while ((match = regex.exec(lines[i])) !== null) {
              matches.push(match[1]);
            }
            
            if (matches.length >= 5) {
              carriersData.push({
                key: matches[0],
                name_en: matches[1],
                name_cn: matches[2],
                name_hk: matches[3],
                url: matches[4]
              });
            }
          }
          
          filteredData = [...carriersData];
          sortData();
          renderTable();
        } catch (error) {
          console.error('Error loading carriers data:', error);
          tableBody.innerHTML = `<tr><td colspan="5" style="text-align: center; color: #e74c3c;">
            <i class="fas fa-exclamation-triangle"></i> Error loading carriers data. Please try again later.
          </td></tr>`;
          tableInfo.textContent = 'Error loading data';
        }
      }
      
      // Sort data based on current sort column and direction
      function sortData() {
        filteredData.sort((a, b) => {
          let valueA = a[sortColumn].toLowerCase();
          let valueB = b[sortColumn].toLowerCase();
          
          if (valueA < valueB) return sortDirection === 'asc' ? -1 : 1;
          if (valueA > valueB) return sortDirection === 'asc' ? 1 : -1;
          return 0;
        });
      }
      
      // Render the table with current page data
      function renderTable() {
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
        const pageData = filteredData.slice(startIndex, endIndex);
        
        tableBody.innerHTML = '';
        
        if (pageData.length === 0) {
          tableBody.innerHTML = `<tr><td colspan="5" style="text-align: center;">No carriers found</td></tr>`;
        } else {
          pageData.forEach(carrier => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${carrier.key}</td>
              <td>${carrier.name_en}</td>
              <td>${carrier.name_cn}</td>
              <td>${carrier.name_hk}</td>
              <td><a href="${carrier.url}" target="_blank" rel="noopener">Visit Website</a></td>
            `;
            tableBody.appendChild(row);
          });
        }
        
        // Update table info
        tableInfo.textContent = `Showing ${startIndex + 1} to ${endIndex} of ${filteredData.length} carriers`;
        
        // Update pagination
        updatePagination();
      }
      
      // Update pagination controls
      function updatePagination() {
        const totalPages = Math.ceil(filteredData.length / itemsPerPage);
        
        prevButton.disabled = currentPage === 1;
        nextButton.disabled = currentPage === totalPages;
        
        // Create page number buttons
        pageNumbers.innerHTML = '';
        const maxVisiblePages = 5;
        let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
        
        if (endPage - startPage + 1 < maxVisiblePages) {
          startPage = Math.max(1, endPage - maxVisiblePages + 1);
        }
        
        for (let i = startPage; i <= endPage; i++) {
          const pageButton = document.createElement('button');
          pageButton.textContent = i;
          pageButton.classList.toggle('active', i === currentPage);
          pageButton.addEventListener('click', () => {
            currentPage = i;
            renderTable();
          });
          pageNumbers.appendChild(pageButton);
        }
      }
      
      // Filter data based on search input
      function filterData() {
        const searchTerm = searchInput.value.toLowerCase();
        
        if (searchTerm === '') {
          filteredData = [...carriersData];
        } else {
          filteredData = carriersData.filter(carrier => 
            carrier.key.toLowerCase().includes(searchTerm) ||
            carrier.name_en.toLowerCase().includes(searchTerm) ||
            carrier.name_cn.toLowerCase().includes(searchTerm) ||
            carrier.name_hk.toLowerCase().includes(searchTerm) ||
            carrier.url.toLowerCase().includes(searchTerm)
          );
        }
        
        currentPage = 1;
        sortData();
        renderTable();
      }
      
      // Set up event listeners
      searchInput.addEventListener('input', filterData);
      
      prevButton.addEventListener('click', () => {
        if (currentPage > 1) {
          currentPage--;
          renderTable();
        }
      });
      
      nextButton.addEventListener('click', () => {
        const totalPages = Math.ceil(filteredData.length / itemsPerPage);
        if (currentPage < totalPages) {
          currentPage++;
          renderTable();
        }
      });
      
      // Set up sorting
      tableHeaders.forEach(header => {
        header.addEventListener('click', () => {
          const column = header.getAttribute('data-sort');
          
          if (sortColumn === column) {
            sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
          } else {
            sortColumn = column;
            sortDirection = 'asc';
          }
          
          // Update sort indicators
          tableHeaders.forEach(h => {
            const icon = h.querySelector('i');
            if (h === header) {
              icon.className = sortDirection === 'asc' ? 'fas fa-sort-up' : 'fas fa-sort-down';
            } else {
              icon.className = 'fas fa-sort';
            }
          });
          
          sortData();
          renderTable();
        });
      });
      
      // Load initial data
      loadCarriersData();
    });
  </script>
</body>
</html>
